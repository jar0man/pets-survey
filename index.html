<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
    crossorigin="anonymous">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
    crossorigin="anonymous">
  <link rel="stylesheet" href="css/style.css">
  <title>Bootstrap Theme</title>
  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script src="js/pie-chart.js"></script>
</head>

<body>
  <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">
    <div class="container">
        <a href="index.html" class="navbar-brand">Pets-Survey</a>
        <button class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                  <!--  <a href="#home" class="nav-link">Home</a>-->
                    <img src="img\64px-pets.png" alt="" class="nav-link">
                </li>
                <li class="nav-item">
                        <a href="#home-section" class="nav-link">Home</a>
                    </li>
                <li class="nav-item">
                    <a href="#survey-head-section" class="nav-link">Survey</a>
                </li>                             
                <li class="nav-item">
                    <a href="#result-head-section" class="nav-link">Results</a>
                </li>                
                <li class="nav-item">
                    <a href="#about-head-section" class="nav-link">About</a>
                </li>   
            </ul>
        </div>
    </div>
  </nav>
<!-- HOME SECTION -->
<header id="home-section">
    <div class="dark-overlay">
        <div class="home-inner container">
            <div class="row">
                <div class="col-lg-8 d-lg-block">
                    <h1 class="display-4">The most <strong>controversial topic</strong> in the
                        <strong>world</strong>
                    </h1>
                    <div class="d-flex">
                        <div class="p-3 align-self-start">
                            <i class="fas fa-check"></i>                            
                        </div>
                        <div class="p-3 align-self-end">
                            Which is the cutest. The most adorable between the beasts.
                        </div>
                    </div>
                    <div class="d-flex">
                        <div class="p-3 align-self-start">
                            <i class="fas fa-check"></i>                            
                        </div>
                        <div class="p-3 align-self-end">
                            Which is the fluffier. The one that everyone wants to hold between their arms.
                        </div>
                    </div>
                    <div class="d-flex">
                        <div class="p-3 align-self-start">
                            <i class="fas fa-check"></i>                            
                        </div>
                        <div class="p-3 align-self-end">
                            Which is the best friend. That royal buddy who is always ready to help us without considering the risk.
                        </div>
                    </div>
                </div>               
            </div>
        </div>
    </div>
</header>
<!-- SURVEY HEAD --> 
<section id="survey-head-section">
    <div class="container">
        <div class="row">
            <div class="col text-center py-5">
                <h1 class="display-5">Survey</h1>
                <p class="lead">Participate in our survey to know which is the most loved pet in the world. You 
                    can check out the results by total and for each country.
                </p>
                <a href="#survey-section" class="btn btn-outline-secondary">Find Out More</a>
            </div>
        </div>
    </div>
</section>

<!-- SURVEY SECTION-->
<section id="survey-section" class="bg-light text-muted py-5">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <img src="img/survey-section1.jpg" alt="" class="img-fluid mb-3 rounded-circle">
            </div>
            <div class="col-md-6">
                <h3>Answering</h3>
                <p>
                    Come on! Click on the picture of your favorite pet and click the button. 
                    The answer will be send to our servers. Don't worry if you send a wrong animal,
                    we will save your last answer only.
                </p>
                
                <form onchange="recalcText()">
                   <!-- <div class="d-flex">
                        <div class="p-4 align-self-start">
                          <label>
                            <input type="radio" value="dog" name="favoritePet" checked>
                            <img src="img\64px-dog.png">
                         </label>
                        </div>
                        
                    </div>
                -->
                
                <div class="container">
                    <div class="row">
                        <div class="col">
                            <label>
                                    <input type="radio" value="dog" name="favoritePet" checked>
                                    <img src="img\64px-dog.png">
                            </label>
                        </div>
                        <div class="col">
                            <label>
                                    <input type="radio" value="cat" name="favoritePet" >
                                    <img src="img\64px-cat.png">
                            </label>
                        </div>
                        <div class="col">
                                <label>
                                        <input type="radio" value="bird" name="favoritePet" >
                                        <img src="img\64px-bird.png">
                                </label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <label>
                                    <input type="radio" value="turtle" name="favoritePet" >
                                    <img src="img\64px-turtle.png">
                            </label>
                        </div>
                        <div class="col">
                            <label>
                                    <input type="radio" value="duck" name="favoritePet" >
                                    <img src="img\64px-duck.png">
                            </label>
                        </div>
                        <div class="col">
                                <label>
                                        <input type="radio" value="fish" name="favoritePet" >
                                        <img src="img\64px-fish.png">
                                </label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <label>
                                    <input type="radio" value="mouse" name="favoritePet" >
                                    <img src="img\64px-mouse.png">
                            </label>
                        </div>
                        <div class="col">
                            <label>
                                    <input type="radio" value="snake" name="favoritePet" >
                                    <img src="img\64px-snake.png" >
                            </label>
                        </div>
                        <div class="col">
                                <label>
                                        <input type="radio" value="koala" name="favoritePet" >
                                        <img src="img\64px-koala.png">
                                </label>
                        </div>
                    </div>
                  </div><!--container-->

                </form>
                <div class="text-center py-3"><h3 class="btn btn-outline-secondary" id="favoritePetText" onclick="vote()">
                </h3></div>
            </div>
                
            </div>
        </div>
    </div>
</section> <!-- End Survey Section -->
<!-- RESULT HEAD --> 
<section id="result-head-section" class="bg-primary">
    <div class="container">
        <div class="row">
            <div class="col bg-blue text-center py-5">
                <h1 class="display-5">Result</h1>
                <p class="lead">Let's see how your favorite pet is doing it. 
                    We can evaluate them for each country, city... or globally.                     
                </p>
                <a href="#result-section" class="btn btn-outline-light">Find Out More</a>
            </div>
        </div>
    </div>
</section>
<!-- RESULT SECTION-->
<section id="result-section" class="bg-light text-muted py-5">
    <div class="container">
        <div class="row">            
                <div class="col-md-6" style='width: 500px; height:500px;'>                
                         <!--<div class="d-flex" id="pie_chart" style='border: 1px solid red; width: 100%;padding:0;'>
                             <script>draw_pie_chart();</script></div>-->
                            <svg class="scaling-svg"  id="pie_chart" > 
                                <!-- SVG content -->
                                <script>loadSummaryData();</script>
                            </svg>
                </div>
                <div class="col-md-6">
                    <h3>Summary</h3>
                    <p>
                        Summary results!
                    </p>
                    
                </div>
                
            </div>
        </div>
</section> <!-- End Result Section -->

  <script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
    crossorigin="anonymous"></script>

  <script>
    // Get the current year for the copyright
    $('#year').text(new Date().getFullYear());
    
   // $('#favoritePetText').text(document.querySelector('input[name="favoritePet"]:checked').value)
    recalcText()
    function recalcText(){
        button_text = "My Favorite: " + document.querySelector('input[name="favoritePet"]:checked').value;
        $('#favoritePetText').text(button_text);        
        $('#favoritePetText').removeClass("vote-saved");
        $('#favoritePetText').removeClass("disabled");
    }
    function vote(){        
        var favoritePet = document.querySelector('input[name="favoritePet"]:checked').value;
        var url = "https://api.handsonbigdata.com/survey";
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == XMLHttpRequest.DONE & this.status == 200 ) {
                
                api_response = JSON.parse(this.responseText);
                $('#favoritePetText').text(api_response.body);
                $('#favoritePetText').addClass("vote-saved");
                $('#favoritePetText').addClass("disabled");
            }
        };
        xhttp.open("POST", url , true);
        xhttp.setRequestHeader("Content-type", "application/json");
        xhttp.send('{"question":"favorite pet","answer":"'+ favoritePet + '"}');
        
    }
  </script>
</body>

</html>